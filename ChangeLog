------------------------------------------------------------------------
r49391 | gerald | 2013-05-17 15:11:23 -0700 (Fri, 17 May 2013) | 2 lines
Changed paths:
   M /trunk-1.8/ChangeLog
   M /trunk-1.8/config.nmake
   M /trunk-1.8/configure.in
   M /trunk-1.8/debian/changelog
   M /trunk-1.8/debian/wireshark-common.files
   M /trunk-1.8/docbook/release-notes.xml
   M /trunk-1.8/epan/Makefile.am
   M /trunk-1.8/make-version.pl
   M /trunk-1.8/version.conf
   M /trunk-1.8/wiretap/Makefile.am

1.8.7 â†’ 1.8.8.

------------------------------------------------------------------------
r49392 | gerald | 2013-05-17 15:11:49 -0700 (Fri, 17 May 2013) | 2 lines
Changed paths:
   M /trunk-1.8/ChangeLog

Prep for 1.8.8.

------------------------------------------------------------------------
r49420 | morriss | 2013-05-19 10:29:28 -0700 (Sun, 19 May 2013) | 8 lines
Changed paths:
   M /trunk-1.8/asn1/nbap/nbap.cnf
   M /trunk-1.8/epan/dissectors/packet-nbap.c

Copy over from trunk:

  ------------------------------------------------------------------------
  r49418 | etxrab | 2013-05-19 11:21:33 -0400 (Sun, 19 May 2013) | 1 line

  Don't access nbap_dch_chnl_info if the index is > maxNrOfDCHs
  ------------------------------------------------------------------------

------------------------------------------------------------------------
r49429 | gerald | 2013-05-19 20:15:24 -0700 (Sun, 19 May 2013) | 1 line
Changed paths:
   M /trunk-1.8/manuf

[Automatic manuf, services and enterprise-numbers update for 2013-05-19]
------------------------------------------------------------------------
r49432 | gerald | 2013-05-19 20:45:15 -0700 (Sun, 19 May 2013) | 1 line
Changed paths:
   M /trunk-1.8/services

[Automatic manuf, services and enterprise-numbers update for 2013-05-19]
------------------------------------------------------------------------
r49587 | gerald | 2013-05-26 07:34:36 -0700 (Sun, 26 May 2013) | 1 line
Changed paths:
   M /trunk-1.8/manuf
   M /trunk-1.8/services

[Automatic manuf, services and enterprise-numbers update for 2013-05-26]
------------------------------------------------------------------------
r49611 | morriss | 2013-05-29 07:08:06 -0700 (Wed, 29 May 2013) | 13 lines
Changed paths:
   M /trunk-1.8
   M /trunk-1.8/epan/dissectors/packet-capwap.c

Copy over from the trunk in order to fix https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=8725 :

  ------------------------------------------------------------------------
  r43716 | cmaynard | 2012-07-14 15:52:18 -0400 (Sat, 14 Jul 2012) | 3 lines
  Changed paths:
     M /trunk/epan/dissectors/packet-capwap.c

  Don't pass the return value of tvb_length_remaining() to fragment_add_check(), as it might have been -1.
  Fixes Coverity CID 280510: Improper use of negative value.

  ------------------------------------------------------------------------


------------------------------------------------------------------------
r49612 | morriss | 2013-05-29 07:38:07 -0700 (Wed, 29 May 2013) | 14 lines
Changed paths:
   M /trunk-1.8
   M /trunk-1.8/epan/dissectors/packet-ppp.c

Copy over from the trunk in order to fix https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=8727 :

  ------------------------------------------------------------------------
  r46128 | wmeier | 2012-11-21 21:27:40 -0500 (Wed, 21 Nov 2012) | 4 lines
  Changed paths:
     M /trunk/epan/dissectors/packet-ppp.c

  Fix potential buffer overflow crash; (Bug #7880).
  Rework code logic slightly so same code path (and tests)
   used whether or not 'if(tree)'.

  ------------------------------------------------------------------------


------------------------------------------------------------------------
r49614 | gerald | 2013-05-29 08:17:21 -0700 (Wed, 29 May 2013) | 2 lines
Changed paths:
   M /trunk-1.8/docbook/release-notes.xml

Add Bug 8725 (CAPWAP crash).

------------------------------------------------------------------------
r49627 | morriss | 2013-05-29 18:21:36 -0700 (Wed, 29 May 2013) | 22 lines
Changed paths:
   M /trunk-1.8
   M /trunk-1.8/epan/dissectors/packet-gmr1_bcch.c

Copy over revision from the trunk in order to fix the fuzz failure reported
in https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=8726 :

  ------------------------------------------------------------------------
  r44674 | pascal | 2012-08-25 17:31:29 -0400 (Sat, 25 Aug 2012) | 11 lines
  Changed paths:
     M /trunk/epan/dissectors/packet-gmr1_bcch.c

  From Sylvain Munaut via https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=7664 :
  packet-gmr1_bcch: Add guards in the SI1/2 choice of segment

  Although the CSN1 dissector itself will just stop if there is
  no matching segment, it will leave the choice field uninitizalized
  and so when we use it to fill some other text, it crashes ...

  To protect against that, we put a last choice entry that will always
  match. As a bonus, it triggers an explicit error in CSN so you
  know something is wrong.

  ------------------------------------------------------------------------


------------------------------------------------------------------------
r49679 | eapache | 2013-06-01 11:22:11 -0700 (Sat, 01 Jun 2013) | 26 lines
Changed paths:
   M /trunk-1.8/epan/dissectors/packet-rdp.c

Manually backport parts of
------------------------------------------------------------------------
r46158 | wmeier | 2012-11-23 16:11:47 -0500 (Fri, 23 Nov 2012) | 13 lines
Changed paths:
   M /trunk/epan/dissectors/packet-rdp.c

Improve dissection;
- Properly handle DataBlocks with optional fields at end;
- Fix a few field dissections;
General code cleanup;
- Remove almost all tests using tvb_length_remaining():
   If there's not enough data available, just let an
   exception be thrown.
- Fix a memory leak;
- Simplify code in various places.
- Add a reference to the (a ?) Microsoft spec for RDP.

Fixes Bug #7862 in a more complete manner than SVN #45566.

------------------------------------------------------------------------

Fixes https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=8729
which is really a tangential duplicate of
https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=7862


------------------------------------------------------------------------
r49688 | eapache | 2013-06-01 17:08:56 -0700 (Sat, 01 Jun 2013) | 19 lines
Changed paths:
   M /trunk-1.8
   M /trunk-1.8/epan/dissectors/packet-gsm_cbch.c

Copy over revisions from the trunk:

  ------------------------------------------------------------------------
  r49686 | eapache | 2013-06-01 19:56:32 -0400 (Sat, 01 Jun 2013) | 9 lines
  Changed paths:
     M /trunk/epan/dissectors/packet-gsm_cbch.c

  Fix an infinite loop in the GSM CBCH dissector.

  The looping logic is a bit odd, and there was a case where we were never
  incrementing any of the multiple loop variables. I suspect the entire function
  could be simplified, but this commit fixes the hang and is better suited to
  backporting than anything complex.

  https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=8730

  ------------------------------------------------------------------------


------------------------------------------------------------------------
r49692 | gerald | 2013-06-02 07:34:36 -0700 (Sun, 02 Jun 2013) | 1 line
Changed paths:
   M /trunk-1.8/manuf
   M /trunk-1.8/services

[Automatic manuf, services and enterprise-numbers update for 2013-06-02]
------------------------------------------------------------------------
r49738 | gerald | 2013-06-03 17:29:45 -0700 (Mon, 03 Jun 2013) | 49 lines
Changed paths:
   M /trunk-1.8
   M /trunk-1.8/docbook/release-notes.xml
   M /trunk-1.8/epan/dissectors/packet-rpc.c
   M /trunk-1.8/epan/proto.c

Copy over revisions from the trunk:

  ------------------------------------------------------------------------
  r49645 | morriss | 2013-05-30 18:46:40 -0700 (Thu, 30 May 2013) | 6 lines
  Changed paths:
     M /trunk/epan/dissectors/packet-rpc.c

  Get rid of most of the if(tree) checks: the proto_tree_add_*() functions
  don't need them any more and, as shown in
  https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=3290#c16
  we really want to check if we're looking at something beyond the end of the TVB
  (in order to break out of very long loops).
  ------------------------------------------------------------------------
  r49652 | eapache | 2013-05-31 06:08:03 -0700 (Fri, 31 May 2013) | 5 lines
  Changed paths:
     M /trunk/epan/proto.c

  Fix the integer overflow case Jakub caught in
  https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=3290#c26

  Also use indentation consistent with the rest of the file.
  ------------------------------------------------------------------------


Copy over with manual intervention:

  ------------------------------------------------------------------------
  r49644 | morriss | 2013-05-30 18:46:28 -0700 (Thu, 30 May 2013) | 14 lines
  Changed paths:
     M /trunk/epan/proto.c

  (Finally!) check in part of Didier's patch to fix
  https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=3290
  (TRY_TO_FAKE_THIS_ITEM disables bounds errors):

  Before calling TRY_TO_FAKE_THIS_ITEM() check if the length given (or, in
  the case of FT_UINT_{STRING,BYTES}, the length we retrieve from the TVB)
  exceeds what's left in the TVB.

  Do this only for proto_tree_add_item() for now (it's the most commonly used
  and thus the biggest trouble maker in this area).

  Similar changes for other APIs will come later (if nothing blows up).  Despite
  the fuzz failures this bug has caused I'm not sure about back-porting it...
  ------------------------------------------------------------------------


Update the release notes.

------------------------------------------------------------------------
r49747 | morriss | 2013-06-03 19:40:14 -0700 (Mon, 03 Jun 2013) | 20 lines
Changed paths:
   M /trunk-1.8/epan/dissectors/packet-assa_r3.c

Copy over with manual intervention:

  ------------------------------------------------------------------------
  r49744 | morriss | 2013-06-03 22:01:53 -0400 (Mon, 03 Jun 2013) | 10 lines

  Fix the fuzz failure reported (by me) in https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=8764 :

  Apply the fix from bug 8539 (r48796) to another function (dissect_r3_upstreamcommand_queryconfig()):

  Bail out of the item length we get (which we use to increment the offset) is 0.
  Otherwise the offset does not advance and we loop forever.

  While we're in there: get the item length just once (there's no need to call
  tvb_get_guint8() a half dozen times when one will do).

  ------------------------------------------------------------------------

Also copy over part of r43663: replace a DISSECTOR_ASSERT() with an expert info.


------------------------------------------------------------------------
r49773 | martink | 2013-06-04 12:53:21 -0700 (Tue, 04 Jun 2013) | 11 lines
Changed paths:
   M /trunk-1.8/epan/dissectors/packet-bt-dht.c

copy over from the trunk

------------------------------------------------------------------------
r49729 | martink | 2013-06-03 23:01:43 +0200 (Mon, 03 Jun 2013) | 5 lines

From chen li
handle list ending delimiter in bt-dht peer list

https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=8759


------------------------------------------------------------------------
r49778 | sake | 2013-06-04 14:43:49 -0700 (Tue, 04 Jun 2013) | 15 lines
Changed paths:
   M /trunk-1.8
   M /trunk-1.8/epan/column-utils.c

Copy over revisions from the trunk:

  ------------------------------------------------------------------------
  r49776 | sake | 2013-06-04 23:36:47 +0200 (di, 04 jun 2013) | 5 lines
  Changed paths:
     M /trunk/epan/column-utils.c

  Fix for https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=7546

  Make sure unresolved columns are indeed unresolved

  ------------------------------------------------------------------------

Update the release notes.

------------------------------------------------------------------------
r49795 | cmaynard | 2013-06-05 13:57:11 -0700 (Wed, 05 Jun 2013) | 2 lines
Changed paths:
   M /trunk-1.8/Makefile.nmake

Fix a typo introduced in r41061: lugins -> plugins.

------------------------------------------------------------------------
r49814 | gerald | 2013-06-06 12:14:23 -0700 (Thu, 06 Jun 2013) | 61 lines
Changed paths:
   M /trunk-1.8/doc/randpkt.pod
   M /trunk-1.8/doc/wireshark.pod.template
   M /trunk-1.8/docbook/release-notes.xml
   M /trunk-1.8/epan/dissectors/packet-eapol.c
   M /trunk-1.8/epan/dissectors/packet-gsm_sms.c
   M /trunk-1.8/epan/dissectors/packet-user_encap.c
   M /trunk-1.8/epan/expert.c
   M /trunk-1.8/ui/cli/tap-iostat.c

Copy over revisions from the trunk:

  ------------------------------------------------------------------------
  r49409 | martink | 2013-05-18 10:08:46 -0700 (Sat, 18 May 2013) | 9 lines
  Changed paths:
     M /trunk/epan/dissectors/packet-user_encap.c

  distinguish between length and reported length when dissecting a packet
  with DLT_USERxy

  with this fix, the user-encap dissector hands over truncated packets to
  the defined sub-dissector

  (the previous version would assume length==reported length and throw an
  execption for truncated packets)
  ------------------------------------------------------------------------
  r49426 | cmaynard | 2013-05-19 18:53:26 -0700 (Sun, 19 May 2013) | 2 lines
  Changed paths:
     M /trunk/doc/wireshark.pod.template

  Add some newlines at the end of the file so the authors are printer properly.
  ------------------------------------------------------------------------
  r49437 | alagoutte | 2013-05-20 09:31:44 -0700 (Mon, 20 May 2013) | 4 lines
  Changed paths:
     M /trunk/epan/dissectors/packet-eapol.c

  From david19801118 via https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=8680 Add decryption for WPA eapol 4-way handshake

  Wireshark can't decode eapol packet which using WPA properly.
  (decode eapol packaet which using WPA2 is work well.)
  ------------------------------------------------------------------------
  r49451 | mmann | 2013-05-20 11:50:50 -0700 (Mon, 20 May 2013) | 1 line
  Changed paths:
     M /trunk/ui/cli/tap-iostat.c

  The printf format may require 2 arguments passed and if it does, the second argument could be garbage, so make sure printf has 2 arguments.  Fixes bug 8066 (https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=8066)
  ------------------------------------------------------------------------
  r49513 | cmaynard | 2013-05-22 08:42:34 -0700 (Wed, 22 May 2013) | 2 lines
  Changed paths:
     M /trunk/doc/randpkt.pod

  Fix presentation of types.
  ------------------------------------------------------------------------
  r49565 | mmann | 2013-05-24 12:23:36 -0700 (Fri, 24 May 2013) | 3 lines
  Changed paths:
     M /trunk/epan/expert.c

  Ensure most severe is displayed in expert column.  Bug 7733 (https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=7733)

  #BACKPORT
  ------------------------------------------------------------------------
  r49546 | pascal | 2013-05-23 13:28:59 -0700 (Thu, 23 May 2013) | 2 lines
  Changed paths:
     M /trunk/epan/dissectors/packet-gsm_sms.c

  Fix computation of TP-User-Data-Length when SMS is coded with GSM 7 bit default alphabet and TP-User-Data-Header field is present
  ------------------------------------------------------------------------


Update the release notes.

------------------------------------------------------------------------
r49815 | gerald | 2013-06-06 12:16:01 -0700 (Thu, 06 Jun 2013) | 20 lines
Changed paths:
   M /trunk-1.8
   M /trunk-1.8/docbook/release-notes.xml
   M /trunk-1.8/epan/dissectors/packet-http.c

Copy over r49623 from the trunk:

  ------------------------------------------------------------------------
  r49623 | morriss | 2013-05-29 15:43:20 -0700 (Wed, 29 May 2013) | 10 lines
  Changed paths:
     M /trunk/epan/dissectors/packet-http.c

  Fix the infinite recursion problem reported in
  https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=8733 :

  We can't solely rely on the port in the URI to determine whether we will be
  recursively called by decode_tcp_ports().  Instead also check the conversation
  entry too: if we find that we are the subdissector for this conversation
  (which we might be--without the port being in our list of ports--if we
  heuristically picked up the conversation or the user did Decode-As),
  just bail out and dissect the payload as data.
  ------------------------------------------------------------------------

Update the release notes.

------------------------------------------------------------------------
r49817 | gerald | 2013-06-06 12:55:55 -0700 (Thu, 06 Jun 2013) | 13 lines
Changed paths:
   M /trunk-1.8
   M /trunk-1.8/docbook/release-notes.xml
   M /trunk-1.8/wiretap/vwr.c

Copy over r49739 from the trunk:

  ------------------------------------------------------------------------
  r49739 | morriss | 2013-06-03 17:50:05 -0700 (Mon, 03 Jun 2013) | 5 lines
  Changed paths:
     M /trunk/wiretap/vwr.c

  Fix the wiretap fuzz failure reported in https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=8760 :

  Check that the record length we got out of the file is at least as big as
  stats block trailer; if not, declare the file bad.
  ------------------------------------------------------------------------

------------------------------------------------------------------------
r49818 | gerald | 2013-06-06 13:00:15 -0700 (Thu, 06 Jun 2013) | 15 lines
Changed paths:
   M /trunk-1.8
   M /trunk-1.8/docbook/release-notes.xml
   M /trunk-1.8/epan/dissectors/packet-dcp-etsi.c

Copy over r49802 from the trunk:

  ------------------------------------------------------------------------
  r49802 | eapache | 2013-06-05 19:53:36 -0700 (Wed, 05 Jun 2013) | 6 lines
  Changed paths:
     M /trunk/epan/dissectors/packet-dcp-etsi.c

  From myself and Julian Cable via (and fixing)
  https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=8717

  Don't add a DCP-ETSI fragment for reassembly if the length is wrong.
  ------------------------------------------------------------------------

Update the release notes.

------------------------------------------------------------------------
r49823 | gerald | 2013-06-06 14:34:16 -0700 (Thu, 06 Jun 2013) | 88 lines
Changed paths:
   M /trunk-1.8
   M /trunk-1.8/asn1/c1222/c1222.cnf
   M /trunk-1.8/asn1/tetra/packet-tetra-template.c
   M /trunk-1.8/docbook/release-notes.xml
   M /trunk-1.8/epan/dissectors/packet-c1222.c
   M /trunk-1.8/epan/dissectors/packet-gsm_sms.c
   M /trunk-1.8/epan/dissectors/packet-imap.c
   M /trunk-1.8/epan/dissectors/packet-sgsap.c
   M /trunk-1.8/epan/dissectors/packet-tetra.c
   M /trunk-1.8/ui/gtk/sctp_assoc_analyse.c
   M /trunk-1.8/ui/gtk/voip_calls.c

Copy over revisions from the trunk:

  ------------------------------------------------------------------------
  r49682 | pascal | 2013-06-01 13:51:14 -0700 (Sat, 01 Jun 2013) | 3 lines
  Changed paths:
     M /trunk/asn1/c1222/c1222.cnf
     M /trunk/epan/dissectors/packet-c1222.c

  Fix https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=8744 :
  Display C12.22 Invocation Id as unsigned integer
  ------------------------------------------------------------------------
  r49804 | alagoutte | 2013-06-06 09:00:23 -0700 (Thu, 06 Jun 2013) | 8 lines
  Changed paths:
     M /trunk/ui/gtk/voip_calls.c

  From report of IgorVK via https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=8736 Crash analyzing VoIP Calls

  Wireshark crashes when analyzing Telephony->VoIP Calls from the pcap file attached.

  From me :
  Some packets is detect to be T38 and ->stop_fd is not initialize

  #Backport 1.10 and 1.8
  ------------------------------------------------------------------------
  r49698 | pascal | 2013-06-02 13:57:48 -0700 (Sun, 02 Jun 2013) | 3 lines
  Changed paths:
     M /trunk/epan/dissectors/packet-gsm_sms.c

  Fix https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=8756 :
  Compute the number of septets needed for an alphanumeric address
  ------------------------------------------------------------------------
  r49722 | pascal | 2013-06-03 10:55:20 -0700 (Mon, 03 Jun 2013) | 3 lines
  Changed paths:
     M /trunk/epan/dissectors/packet-imap.c

  Fix https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=8739 :
  Move offset to end of line without assuming that we always have \r\n at the end of it
  ------------------------------------------------------------------------
  r49644 | morriss | 2013-05-30 18:46:28 -0700 (Thu, 30 May 2013) | 14 lines
  Changed paths:
     M /trunk/epan/proto.c

  (Finally!) check in part of Didier's patch to fix
  https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=3290
  (TRY_TO_FAKE_THIS_ITEM disables bounds errors):

  Before calling TRY_TO_FAKE_THIS_ITEM() check if the length given (or, in
  the case of FT_UINT_{STRING,BYTES}, the length we retrieve from the TVB)
  exceeds what's left in the TVB.

  Do this only for proto_tree_add_item() for now (it's the most commonly used
  and thus the biggest trouble maker in this area).

  Similar changes for other APIs will come later (if nothing blows up).  Despite
  the fuzz failures this bug has caused I'm not sure about back-porting it...
  ------------------------------------------------------------------------
  r49652 | eapache | 2013-05-31 06:08:03 -0700 (Fri, 31 May 2013) | 5 lines
  Changed paths:
     M /trunk/epan/proto.c

  Fix the integer overflow case Jakub caught in
  https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=3290#c26

  Also use indentation consistent with the rest of the file.
  ------------------------------------------------------------------------


Copy over with manual intervention:

  ------------------------------------------------------------------------
  r48789 | etxrab | 2013-04-08 09:44:15 -0700 (Mon, 08 Apr 2013) | 1 line
  Changed paths:
     M /trunk/epan/dissectors/packet-sgsap.c

  Fix dissection of IMSI detach from non-EPS service type.
  ------------------------------------------------------------------------
  r49610 | mmann | 2013-05-29 06:50:45 -0700 (Wed, 29 May 2013) | 3 lines
  Changed paths:
     M /trunk/ui/gtk/sctp_assoc_analyse.c

  Bugfix crash when 'SCTP' -> 'Prepare Filter for this Association' has no associations.  Bug 8731 (https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=8731)

  Dialog (wants to) pop up noting no associations, but sctp_set_filter() wants to press on assuming there is an association. Added NULL check to prevent assumption.
  ------------------------------------------------------------------------


Update the release notes.

------------------------------------------------------------------------
r49828 | gerald | 2013-06-06 17:39:16 -0700 (Thu, 06 Jun 2013) | 2 lines
Changed paths:
   M /trunk-1.8/tools/git-compare-abis.sh

Make sure we run the build command in the top-level directory.

------------------------------------------------------------------------
r49831 | sake | 2013-06-06 23:58:31 -0700 (Thu, 06 Jun 2013) | 13 lines
Changed paths:
   M /trunk-1.8
   M /trunk-1.8/docbook/release-notes.xml
   M /trunk-1.8/epan/dissectors/packet-tcp.c

Copy over revisions from the trunk:

  ------------------------------------------------------------------------
  r49829 | sake | 2013-06-07 08:49:15 +0200 (vr, 07 jun 2013) | 3 lines
  Changed paths:
     M /trunk/epan/dissectors/packet-tcp.c

  Mark retransmitted SYN and FIN packets as retransmissions.

  ------------------------------------------------------------------------

Update the release notes.

------------------------------------------------------------------------
