------------------------------------------------------------------------
r32663 | gerald | 2010-05-04 14:45:21 -0700 (Tue, 04 May 2010) | 2 lines
Changed paths:
   M /trunk-1.2/docbook/release-notes.xml

Update the DOCSIS fix revisions.

------------------------------------------------------------------------
r32676 | gerald | 2010-05-05 10:05:11 -0700 (Wed, 05 May 2010) | 2 lines
Changed paths:
   M /trunk-1.2/ChangeLog
   M /trunk-1.2/NEWS
   M /trunk-1.2/docbook/release-notes.xml
   M /trunk-1.2/version.conf

Release 1.2.8.

------------------------------------------------------------------------
r32682 | gerald | 2010-05-05 14:05:06 -0700 (Wed, 05 May 2010) | 2 lines
Changed paths:
   M /trunk-1.2/config.nmake
   M /trunk-1.2/configure.in
   M /trunk-1.2/debian/changelog
   M /trunk-1.2/docbook/release-notes.xml
   M /trunk-1.2/version.conf

1.2.8 -> 1.2.9

------------------------------------------------------------------------
r32730 | gerald | 2010-05-09 08:04:54 -0700 (Sun, 09 May 2010) | 1 line
Changed paths:
   M /trunk-1.2/epan/enterprise-numbers
   M /trunk-1.2/manuf

[Automatic manuf and enterprise-numbers update for 2010-05-09]
------------------------------------------------------------------------
r32834 | gerald | 2010-05-16 08:07:36 -0700 (Sun, 16 May 2010) | 1 line
Changed paths:
   M /trunk-1.2/epan/enterprise-numbers
   M /trunk-1.2/manuf

[Automatic manuf and enterprise-numbers update for 2010-05-16]
------------------------------------------------------------------------
r32919 | gerald | 2010-05-23 08:04:52 -0700 (Sun, 23 May 2010) | 1 line
Changed paths:
   M /trunk-1.2/epan/enterprise-numbers
   M /trunk-1.2/manuf

[Automatic manuf and enterprise-numbers update for 2010-05-23]
------------------------------------------------------------------------
r33025 | gerald | 2010-05-30 08:04:43 -0700 (Sun, 30 May 2010) | 1 line
Changed paths:
   M /trunk-1.2/epan/enterprise-numbers
   M /trunk-1.2/manuf

[Automatic manuf and enterprise-numbers update for 2010-05-30]
------------------------------------------------------------------------
r33111 | gerald | 2010-06-06 08:04:49 -0700 (Sun, 06 Jun 2010) | 1 line
Changed paths:
   M /trunk-1.2/epan/enterprise-numbers
   M /trunk-1.2/manuf

[Automatic manuf and enterprise-numbers update for 2010-06-06]
------------------------------------------------------------------------
r33115 | gerald | 2010-06-06 15:13:16 -0700 (Sun, 06 Jun 2010) | 126 lines
Changed paths:
   M /trunk-1.2/asn1/sabp/packet-sabp-template.c
   M /trunk-1.2/doc/dfilter2pod.pl
   M /trunk-1.2/docbook/dfilter2xml.pl
   M /trunk-1.2/docbook/release-notes.xml
   M /trunk-1.2/epan/dissectors/packet-http.c
   M /trunk-1.2/epan/dissectors/packet-igmp.c
   M /trunk-1.2/epan/dissectors/packet-kerberos.c
   M /trunk-1.2/epan/dissectors/packet-sabp.c
   M /trunk-1.2/epan/dissectors/packet-xml.c
   M /trunk-1.2/epan/ftypes/ftype-bytes.c
   M /trunk-1.2/epan/ftypes/ftype-guid.c
   M /trunk-1.2/epan/libwireshark.def
   M /trunk-1.2/epan/packet.c
   M /trunk-1.2/file.c
   M /trunk-1.2/gtk/capture_file_dlg.c
   M /trunk-1.2/gtk/decode_as_dlg.c
   M /trunk-1.2/gtk/io_stat.c
   M /trunk-1.2/wiretap/wtap.c
   M /trunk-1.2/wiretap/wtap.h

Copy over revisions from the trunk:

------------------------------------------------------------------------
r30940 | kukosa | 2009-11-12 06:44:40 -0800 (Thu, 12 Nov 2009) | 1 line
Changed paths:
   M /trunk/epan/libwireshark.def

Export more BER functions
------------------------------------------------------------------------
r32068 | stig | 2010-03-01 14:11:20 -0800 (Mon, 01 Mar 2010) | 3 lines
Changed paths:
   M /trunk/epan/dissectors/packet-xml.c

From LEGO via bug 4405:
Add the dot ('.') to the characters that can compose a name.
------------------------------------------------------------------------
r32715 | gerald | 2010-05-07 12:45:47 -0700 (Fri, 07 May 2010) | 5 lines
Changed paths:
   M /trunk/wiretap/wtap.c

EOF in zlib 1.2.5 seems to be sticky. When we're tailing a file and we
reach EOF, zlib's file handle seems to stay at EOF even when more data
is appended to the file. Add a check for 1.2.5 which calls gzseek in
order to unset EOF. Fixes bugs 4708 and 4748.
------------------------------------------------------------------------
r32716 | gerald | 2010-05-07 14:15:24 -0700 (Fri, 07 May 2010) | 3 lines
Changed paths:
   M /trunk/file.c
   M /trunk/wiretap/wtap.c
   M /trunk/wiretap/wtap.h

Zlib has an officially-sanctioned way of clearing EOF when we're tailing
a file.  Use it.
------------------------------------------------------------------------
r32733 | stig | 2010-05-10 03:48:45 -0700 (Mon, 10 May 2010) | 2 lines
Changed paths:
   M /trunk/gtk/io_stat.c

Bring back "1 min" and "10 min" in IO Graph Tick interval.
------------------------------------------------------------------------
r32756 | jake | 2010-05-11 11:04:03 -0700 (Tue, 11 May 2010) | 2 lines
Changed paths:
   M /trunk/epan/dissectors/packet-igmp.c

Show version as generated field.
------------------------------------------------------------------------
r32765 | jake | 2010-05-11 14:46:17 -0700 (Tue, 11 May 2010) | 2 lines
Changed paths:
   M /trunk/epan/ftypes/ftype-bytes.c
   M /trunk/epan/ftypes/ftype-guid.c

Straighten out field type names.
------------------------------------------------------------------------
r32766 | jake | 2010-05-11 14:49:30 -0700 (Tue, 11 May 2010) | 2 lines
Changed paths:
   M /trunk/doc/dfilter2pod.pl
   M /trunk/docbook/dfilter2xml.pl

Update display filter scripts with new field types.
------------------------------------------------------------------------
r32774 | guy | 2010-05-12 12:44:23 -0700 (Wed, 12 May 2010) | 4 lines
Changed paths:
   M /trunk/gtk/capture_file_dlg.c

Don't set the sensitivity of the Open button based on whether we can
open the currently-selected file; that button is also used to select the
file or directory typed in the location bar.  This should fix bug 1791.
------------------------------------------------------------------------
r32848 | morriss | 2010-05-17 14:49:09 -0700 (Mon, 17 May 2010) | 1 line
Changed paths:
   M /trunk/epan/dissectors/packet-smb-pipe.c

Don't pass a NULL pointer to what is supposed to be (according to the format) a string: some implementations of vsnprintf() will core on that.  (Unfortunately it seems that g_vsnprintf() doesn't protect us from this...)
------------------------------------------------------------------------


Copy over with manual intervention:
------------------------------------------------------------------------
r32680 | etxrab | 2010-05-05 12:22:28 -0700 (Wed, 05 May 2010) | 1 line
Changed paths:
   M /trunk/asn1/sabp/packet-sabp-template.c
   M /trunk/epan/dissectors/packet-sabp.c

Calculate correct PDU lenght if the per_length_determinant is one byte long.
------------------------------------------------------------------------
r32723 | sake | 2010-05-08 00:55:12 -0700 (Sat, 08 May 2010) | 3 lines
Changed paths:
   M /trunk/epan/packet.c
   M /trunk/gtk/decode_as_dlg.c

Enable "Decode As..." for ethertype 0x0000 (fix for bug 4721)
------------------------------------------------------------------------
r32752 | wmeier | 2010-05-11 07:34:16 -0700 (Tue, 11 May 2010) | 10 lines
Changed paths:
   M /trunk/epan/dissectors/packet-kerberos.c

Fix handling of pa-data-type KRB5_PA_PAC_REQUEST (& KRB5_PA_S4U2SELF).

-Define pa-data-type KRB5_PA_PAC_REQUEST properly so that it is recognized.
  Fixes bug #4752 (https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=4752)
-Also revert definition of  KRB5_PA_S4U2SELF (to be a positive number).
(All of the above reverts part of SVN #31400).

-Display pa-data-type as FT_INT32.
-Display the value for pa-data-type KRB5_PA_PAC_REQUEST as Boolean (not Int).
------------------------------------------------------------------------
r32772 | morriss | 2010-05-12 06:24:42 -0700 (Wed, 12 May 2010) | 13 lines
Changed paths:
   M /trunk/epan/dissectors/packet-http.c

From Dirk via https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=4758 :

The HTTP dissector uses strtoll() to convert the Content-Length string into a
64bit variable. But that string can contain a number larger (or less) than
64bit, which lets the strtoll() return INT_MAX (or INT_MIN). strtoll() then
indicates this with errno==ERANGE.

The attachted patch checks if errno is set this way and then treats that HTTP
Content-Length as unspecified, since we don't know the real size.

I haven't checked other occurences of strtoll() in the HTTP dissector if they
could benefit from the errno check, or if other dissectors could use it.
------------------------------------------------------------------------

Update the release notes.

------------------------------------------------------------------------
r33119 | gerald | 2010-06-06 17:02:21 -0700 (Sun, 06 Jun 2010) | 10 lines
Changed paths:
   M /trunk-1.2/wiretap/wtap.def

Copy over r32719 from the trunk:

------------------------------------------------------------------------
r32719 | guy | 2010-05-07 17:43:23 -0700 (Fri, 07 May 2010) | 2 lines
Changed paths:
   M /trunk/wiretap/wtap.def

Add wtap_cleareof().
------------------------------------------------------------------------

------------------------------------------------------------------------
r33120 | gerald | 2010-06-06 18:01:30 -0700 (Sun, 06 Jun 2010) | 12 lines
Changed paths:
   M /trunk-1.2/docbook/release-notes.xml
   M /trunk-1.2/epan/dissectors/packet-smb-pipe.c

Copy over r32848 from the trunk:

------------------------------------------------------------------------
r32848 | morriss | 2010-05-17 14:49:09 -0700 (Mon, 17 May 2010) | 1 line
Changed paths:
   M /trunk/epan/dissectors/packet-smb-pipe.c

Don't pass a NULL pointer to what is supposed to be (according to the format) a string: some implementations of vsnprintf() will core on that.  (Unfortunately it seems that g_vsnprintf() doesn't protect us from this...)
------------------------------------------------------------------------

Update the release notes.

------------------------------------------------------------------------
r33121 | gerald | 2010-06-06 18:13:14 -0700 (Sun, 06 Jun 2010) | 13 lines
Changed paths:
   M /trunk-1.2/docbook/release-notes.xml
   M /trunk-1.2/epan/dissectors/packet-ptp.c
   M /trunk-1.2/gtk/gui_utils.c

Copy over r32911 from the trunk:

------------------------------------------------------------------------
r32911 | jake | 2010-05-20 12:03:13 -0700 (Thu, 20 May 2010) | 3 lines
Changed paths:
   M /trunk/gtk/gui_utils.c

Fix for bug 4778:
Check that the widget pointer is still present.
------------------------------------------------------------------------

Fix PTP regression (bug 4773). Update the release notes.

------------------------------------------------------------------------
r33122 | gerald | 2010-06-06 18:26:43 -0700 (Sun, 06 Jun 2010) | 19 lines
Changed paths:
   M /trunk-1.2/docbook/release-notes.xml
   M /trunk-1.2/epan/dissectors/packet-ber.c

Copy over revisions from the trunk:

------------------------------------------------------------------------
r32922 | gerald | 2010-05-23 16:42:58 -0700 (Sun, 23 May 2010) | 3 lines
Changed paths:
   M /trunk/epan/dissectors/packet-ber.c

Make get_ber_length() iterative instead of recursive so we don't overrun the
stack. Discovered by J. Oquendo.
------------------------------------------------------------------------
r33046 | gal | 2010-06-02 06:33:37 -0700 (Wed, 02 Jun 2010) | 3 lines
Changed paths:
   M /trunk/epan/dissectors/packet-ber.c

Updated get_ber_length to handle multiple nested indefinite length encodings.
------------------------------------------------------------------------

Update the release notes.

------------------------------------------------------------------------
r33123 | gerald | 2010-06-06 18:58:57 -0700 (Sun, 06 Jun 2010) | 97 lines
Changed paths:
   M /trunk-1.2/Makefile.am
   M /trunk-1.2/capture.c
   M /trunk-1.2/doc/README.developer
   M /trunk-1.2/docbook/release-notes.xml
   M /trunk-1.2/epan/column-utils.c
   M /trunk-1.2/epan/dissectors/packet-bgp.h
   M /trunk-1.2/epan/dissectors/packet-pgm.c
   M /trunk-1.2/epan/proto.c
   M /trunk-1.2/file.c
   M /trunk-1.2/file.h
   M /trunk-1.2/gtk/filter_autocomplete.c
   M /trunk-1.2/text2pcap-scanner.l
   M /trunk-1.2/tools/lemon/lemon.c
   M /trunk-1.2/trigcap.c

Copy over revisions from the trunk:

------------------------------------------------------------------------
r32947 | jake | 2010-05-25 10:47:00 -0700 (Tue, 25 May 2010) | 3 lines
Changed paths:
   M /trunk/epan/dissectors/packet-bgp.h

Fix for bug 4782:
Use proper bitmask to test the "MATCH"-part.
------------------------------------------------------------------------
r32956 | wmeier | 2010-05-25 15:27:00 -0700 (Tue, 25 May 2010) | 4 lines
Changed paths:
   M /trunk/text2pcap-scanner.l

Handle lines ending in \r\n.
Fixes Bug #4780 
See: https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=4780
------------------------------------------------------------------------
r32962 | guy | 2010-05-25 19:21:23 -0700 (Tue, 25 May 2010) | 3 lines
Changed paths:
   M /trunk/doc/README.developer

Put in a warning about the <stdarg.h> problem that I just found and
fixed in one place (and am now fixing in some other places).
------------------------------------------------------------------------
r32987 | gerald | 2010-05-26 17:49:01 -0700 (Wed, 26 May 2010) | 3 lines
Changed paths:
   M /trunk/gtk/filter_autocomplete.c

Make sure our prefix length is > 0 before lopping off the last
character.  Fixes bug 4797.
------------------------------------------------------------------------
r33005 | gerald | 2010-05-27 16:55:04 -0700 (Thu, 27 May 2010) | 4 lines
Changed paths:
   M /trunk/capture.c
   M /trunk/file.c
   M /trunk/file.h

Add cf_fake_continue_tail() which is called when real-time capture
updates are off and which sets the capture file state to a value that
won't cause an assertion when the user stops capturing. Fixes bug 4035.
------------------------------------------------------------------------
r33028 | guy | 2010-05-31 12:37:26 -0700 (Mon, 31 May 2010) | 13 lines
Changed paths:
   M /trunk/Makefile.am

Wireshark requires routines from libm, such as ceil(), so link with it;
we shouldn't rely on getting it pulled in by other shared libraries, as

	1) there's no guarantee that the other shared libraries we use
	   are linked with it or will continue to be linked with it;

	2) there's no guarantee that we're even linking dynamically;

	3) it fails on Fedora 13 as part of a change to catch programs
	   that implicitly (or explicitly) assume, in their build
	   procedures, that they'll get libraries linked in as a result
	   of linking with other libraries.
------------------------------------------------------------------------


Copy over with manual intervention:
------------------------------------------------------------------------
r32961 | guy | 2010-05-25 19:01:49 -0700 (Tue, 25 May 2010) | 4 lines
Changed paths:
   M /trunk/epan/column-utils.c

Once you've used a va_list, you can't use it again until you
reinitialize it with va_start().  (Yes, there are platforms where
reusing the va_arg fails, e.g. Mac OS X on x86-64.)
------------------------------------------------------------------------
r32963 | guy | 2010-05-25 19:25:13 -0700 (Tue, 25 May 2010) | 6 lines
Changed paths:
   M /trunk/epan/dissectors/dcerpc/idl2wrs.c
   M /trunk/epan/proto.c
   M /trunk/tools/lemon/lemon.c
   M /trunk/trigcap.c

More <stdarg.h> cleanup; some are real bugs, some are just "don't do
va_start and va_end unless you're actually going to use the va_list"
(those bring the va_start and va_end closer to the use point, which
makes it a little more obvious that we're using <stdarg.h> correctly and
makes it a little harder to use it incorrectly).
------------------------------------------------------------------------
r33003 | jake | 2010-05-27 14:54:58 -0700 (Thu, 27 May 2010) | 5 lines
Changed paths:
   M /trunk/epan/dissectors/packet-pgm.c

From  Steven McCoy:
AFI fields are 2 bytes i.s.o. 1.

From me, several more size changes and decode cleanup.
------------------------------------------------------------------------


Update the release notes.

------------------------------------------------------------------------
r33127 | etxrab | 2010-06-07 05:51:23 -0700 (Mon, 07 Jun 2010) | 1 line
Changed paths:
   M /trunk-1.2/diameter/TGPPGmb.xml
   M /trunk-1.2/diameter/dictionary.xml
   M /trunk-1.2/diameter/eap.xml
   M /trunk-1.2/diameter/nasreq.xml
   M /trunk-1.2/diameter/sip.xml

Update diameter.xml files.
------------------------------------------------------------------------
r33131 | gerald | 2010-06-07 08:57:27 -0700 (Mon, 07 Jun 2010) | 43 lines
Changed paths:
   M /trunk-1.2/docbook/release-notes.xml
   M /trunk-1.2/epan/sigcomp-udvm.c

Copy over revisions from the trunk:

------------------------------------------------------------------------
r33065 | guy | 2010-06-02 18:22:18 -0700 (Wed, 02 Jun 2010) | 20 lines
Changed paths:
   M /trunk/epan/sigcomp-udvm.c

Sorry, I forgot that 8.6. UDVM Cycles says

	Note that the number of UDVM cycles MUST NOT be increased if a
	request for additional compressed data fails.

so we *shouldn't* increase the cycle count further when
SIGCOMP_INSTR_INPUT_BYTES fails.  That does *NOT* of course, mean that
we shouldn't increase the cycle count by 1 for a failed INPUT-BYTES
instruction - that would leave UDVM vulnerable to infinite loops (as per
bug 4826), and I *really* doubt that was their intent; presumably, it
means it should not be increased *by the number of cycles for the
additional data*:

	Additionally, if the UDVM successfully requests n bits of
	compressed data using one of the INPUT instructions then the
	number of available UDVM cycles is increased by n *
	cycles_per_bit once the instruction has been executed.

if the attempt to get that additional data fails.
------------------------------------------------------------------------


Copy over with manual intervention:

------------------------------------------------------------------------
r33061 | gerald | 2010-06-02 15:16:49 -0700 (Wed, 02 Jun 2010) | 4 lines
Changed paths:
   M /trunk/epan/sigcomp-udvm.c

Increment the cycle count no matter what. Increase the cycle count
further when SIGCOMP_INSTR_INPUT_BYTES fails. Fixes the infinite loop
found in bug 4826.
------------------------------------------------------------------------

Update the release notes.

------------------------------------------------------------------------
r33133 | gerald | 2010-06-07 09:07:15 -0700 (Mon, 07 Jun 2010) | 20 lines
Changed paths:
   M /trunk-1.2/epan/dissectors/packet-nfs.c

Copy over r33079:

------------------------------------------------------------------------
r33079 | wmeier | 2010-06-03 17:45:37 -0700 (Thu, 03 Jun 2010) | 12 lines
Changed paths:
   M /trunk/epan/dissectors/packet-nfs.c

From Cal Turney: The NFS FH hash (nfs.fh.hash) incorrectly matches multiple filehandles.
"The method used in packet-nfs.c to calculate a 32-bit hash representing the 
 32-byte filehandle is faulty in that the hash often matches multiple
 filehandles."

"This patch uses CRC-32 to calculate the hash.
 We (EMC GNS) have tested this patch for the past two years and we have not
 found a single case where the hash matched more than one filehandle."

See Bug #4839: https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=4839
------------------------------------------------------------------------


------------------------------------------------------------------------
r33134 | gerald | 2010-06-07 09:07:46 -0700 (Mon, 07 Jun 2010) | 23 lines
Changed paths:
   M /trunk-1.2/docbook/release-notes.xml
   M /trunk-1.2/epan/sigcomp-udvm.c

Copy over revisions from the trunk:

------------------------------------------------------------------------
r33087 | gerald | 2010-06-04 11:28:02 -0700 (Fri, 04 Jun 2010) | 3 lines
Changed paths:
   M /trunk/epan/sigcomp-udvm.c

According to RFC 3220 section 7 the max UDVM message size is 65536,
not 65535. Hopefully fixes bug 4837.
------------------------------------------------------------------------

Copy over with manual intervention:

------------------------------------------------------------------------
r33090 | guy | 2010-06-04 12:29:26 -0700 (Fri, 04 Jun 2010) | 2 lines
Changed paths:
   M /trunk/epan/sigcomp-udvm.c

Fix comments.
------------------------------------------------------------------------

Update the release notes.

------------------------------------------------------------------------
r33135 | gerald | 2010-06-07 09:20:00 -0700 (Mon, 07 Jun 2010) | 20 lines
Changed paths:
   M /trunk-1.2/docbook/release-notes.xml
   M /trunk-1.2/epan/dissectors/packet-ipsec.c

Apply patch from bug 4838:

Decoding IPsec (ESP) using AES-CTR fails.

When specifying SA keys for AES-CTR, wireshark expects a key length of 160, 224
or 288 bits, (i.e. 128, 192 or 256 bits, followed by the 32 bit nonce value),
but gcry_cipher_setkey() in packet_ipsec.c fails, as it expects 128, 192 or 256
bits.

Omitting the nonce won't work -- even if wireshark liked those key lengths,
gcrypt wouldn't be able to decrypt without it.

Looking at gcrypt.h, I'm guessing what's missing may be a call to
gcry_cipher_setctr()? Once gcrypt has the nonce, the key len could be
decremented by 4, (32 bits), for the call to gcry_cipher_setkey() and things
should work from there.


Update the release notes.

------------------------------------------------------------------------
r33142 | gerald | 2010-06-07 11:39:55 -0700 (Mon, 07 Jun 2010) | 15 lines
Changed paths:
   M /trunk-1.2/docbook/release-notes.xml
   M /trunk-1.2/epan/dissectors/packet-smb.c

Copy over r32650 by hand:
------------------------------------------------------------------------
r32650 | morriss | 2010-05-03 12:33:23 -0700 (Mon, 03 May 2010) | 6 lines
Changed paths:
   M /trunk/epan/dissectors/packet-smb.c

Fix https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=4734 :

Don't crash on a malformed SMB packet.  According to svn blame, this code
has been here since rev 21713 though maybe something else changed to make the
crash apparent.
------------------------------------------------------------------------

Update the release notes.

------------------------------------------------------------------------
r33150 | gerald | 2010-06-07 12:21:26 -0700 (Mon, 07 Jun 2010) | 2 lines
Changed paths:
   M /trunk-1.2/docbook/release-notes.xml

Update the release notes.

------------------------------------------------------------------------
r33153 | gerald | 2010-06-07 13:39:11 -0700 (Mon, 07 Jun 2010) | 13 lines
Changed paths:
   M /trunk-1.2/docbook/release-notes.xml
   M /trunk-1.2/epan/tcap-persistentdata.h

Copy over by hand:

------------------------------------------------------------------------
r33091 | morriss | 2010-06-04 12:37:31 -0700 (Fri, 04 Jun 2010) | 1 line
Changed paths:
   M /trunk/epan/tcap-persistentdata.h

Increase LENGTH_OID a bit to give us more room for ACNs (probably more than will ever be used).
------------------------------------------------------------------------


Update the release notes.

------------------------------------------------------------------------
